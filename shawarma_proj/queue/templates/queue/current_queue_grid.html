{% extends 'queue/base.html' %}
{% block aditional_static %}
{% load static %}
<script type="text/javascript" src="{% static 'js/current_queue_handlers.js' %}"></script>
{% endblock %}
{% block content %}
    <input hidden value="{% url 'close_order' %}">
    {% for open_order in open_orders %}
        <div class="order-block-container">
            <a href="{% url 'order_content' order_id=open_order.order.id %}">
                <div class="order-block shadowed">
                    <div class="order-block-header">
                        <div class="order-number  {% if open_order.cook_part_count.count == 0 or open_order.cook_part_count.count == open_order.cook_part_ready_count.count %}ready{% endif %}">
                            â„– {{ open_order.order.daily_number }}
                        </div>
                        <div class="order-cook-part  {% if open_order.cook_part_count.count == 0 or open_order.cook_part_count.count == open_order.cook_part_ready_count.count %}ready{% endif %}">
                            ({{ open_order.cook_part_ready_count.count }}/{{ open_order.cook_part_count.count }})
                        </div>
                        <div class="order-block-actions">
                            <button {% if open_order.cook_part_count.count != open_order.cook_part_ready_count.count %}disabled{% endif %} onclick="CloseOrder({{ open_order.order.id }})">
                                Close
                            </button>
                        </div>
                    </div>

                    <div class="order-operator-part">
                        {% for oper_content in open_order.operator_part %}
                            <div class="order-item">
                                {{ oper_content.menu_item.title }}
                            </div>
                        {% empty %}
                            <p>no operator part.</p>
                        {% endfor %}
                    </div>
                    <div class="order-total">
                        Total: {{ open_order.order.total }}
                    </div>
                </div>
            </a>
        </div>
    {% empty %}
        <div>
            No order info.
        </div>
    {% endfor %}
{% endblock %}